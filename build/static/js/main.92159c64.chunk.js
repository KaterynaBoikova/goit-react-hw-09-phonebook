(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[3],{138:function(e,t,c){"use strict";c.r(t);var r,n,a,s,o,u,i=c(0),b=c.n(i),j=c(28),l=c.n(j),d=c(15),O=c(47),f=c(4),h=c(27),g=c(74),v=c.n(g),p=c(5),x=c(13),m=c(17),C=Object(f.c)([],(r={},Object(p.a)(r,m.a.fetchContactsSuccess,(function(e,t){return t.payload})),Object(p.a)(r,m.a.addContactSuccess,(function(e,t){return[].concat(Object(O.a)(e),[t.payload])})),Object(p.a)(r,m.a.deleteContactSuccess,(function(e,t){return e.filter((function(e){return e.id!==t.payload}))})),r)),_=Object(f.c)("",Object(p.a)({},m.a.changeFilter,(function(e,t){return t.payload}))),S=Object(f.c)(!1,(n={},Object(p.a)(n,m.a.fetchContactsRequest,(function(){return!0})),Object(p.a)(n,m.a.fetchContactsSuccess,(function(){return!1})),Object(p.a)(n,m.a.fetchContactsError,(function(){return!1})),Object(p.a)(n,m.a.addContactRequest,(function(){return!0})),Object(p.a)(n,m.a.addContactSuccess,(function(){return!1})),Object(p.a)(n,m.a.addContactError,(function(){return!1})),Object(p.a)(n,m.a.deleteContactRequest,(function(){return!0})),Object(p.a)(n,m.a.deleteContactSuccess,(function(){return!1})),Object(p.a)(n,m.a.deleteContactError,(function(){return!1})),n)),E=Object(x.b)({contacts:C,filter:_,loading:S}),k=c(6),N={name:null,email:null},R=Object(f.c)(N,(a={},Object(p.a)(a,k.a.registerSuccess,(function(e,t){return t.payload.user})),Object(p.a)(a,k.a.loginSuccess,(function(e,t){return t.payload.user})),Object(p.a)(a,k.a.logoutSuccess,(function(){return N})),Object(p.a)(a,k.a.currentUserSuccess,(function(e,t){return t.payload})),a)),y=Object(f.c)("",(s={},Object(p.a)(s,k.a.registerSuccess,(function(e,t){return t.payload.token})),Object(p.a)(s,k.a.loginSuccess,(function(e,t){return t.payload.token})),Object(p.a)(s,k.a.logoutSuccess,(function(){return null})),s)),q=Object(f.c)("",(o={},Object(p.a)(o,k.a.registerSuccess,(function(){return!0})),Object(p.a)(o,k.a.loginSuccess,(function(){return!0})),Object(p.a)(o,k.a.registerError,(function(){return!1})),Object(p.a)(o,k.a.loginError,(function(){return!1})),Object(p.a)(o,k.a.logoutSuccess,(function(){return!1})),Object(p.a)(o,k.a.currentUserError,(function(){return!1})),Object(p.a)(o,k.a.currentUserSuccess,(function(){return!0})),o)),U=Object(f.c)("",(u={},Object(p.a)(u,k.a.registerError,(function(e,t){return t.payload})),Object(p.a)(u,k.a.loginError,(function(e,t){return t.payload})),Object(p.a)(u,k.a.logoutError,(function(e,t){return t.payload})),Object(p.a)(u,k.a.currentUserError,(function(e,t){return t.payload})),u)),w=Object(x.b)({user:R,isLoggedIn:q,token:y,error:U}),A=Object(O.a)(Object(f.d)({serializableCheck:{ignoredActions:[h.a,h.f,h.b,h.c,h.d,h.e]}})),L={key:"loggedIn",storage:v.a,whitelist:["token"]},D=Object(f.a)({reducer:{userData:Object(h.g)(L,w),phonebook:E},middleware:A}),T={store:D,persistor:Object(h.h)(D)},z=c(75),I=c(24),B=(c(97),c(8)),F=c(63),M=c.n(F),J=(c(83),c(155)),P=c(41),Y=function(e){return e.userData.isLoggedIn},H=function(e){return e.userData.user.email},K=c(19),W=c.n(K),G=c(2);function Q(){var e=Object(d.c)(Y);return Object(G.jsxs)("nav",{children:[Object(G.jsx)(I.b,{to:"/",exact:!0,className:W.a.nav_link,activeClassName:W.a.nav_link_active,children:"Home"}),e&&Object(G.jsx)(I.b,{to:"/contacts",className:W.a.nav_link,activeClassName:W.a.nav_link_active,children:"Contacts"})]})}var V=c(161),X=c(159),Z=c(160),$=c(80),ee=c.n($),te=c(49),ce=c.n(te);function re(){var e=Object(d.c)(H),t=Object(d.b)();return Object(G.jsxs)("div",{className:ce.a.userDiv,children:[Object(G.jsx)(J.a,{}),Object(G.jsx)(V.a,{className:ce.a.avatar,children:Object(G.jsx)(ee.a,{})}),Object(G.jsx)(X.a,{className:ce.a.userName,children:e}),Object(G.jsx)(Z.a,{type:"button",color:"inherit",onClick:function(){return t(P.a.userLogout())},children:"Logout"})]})}var ne=function(){return Object(G.jsxs)("div",{children:[Object(G.jsx)(I.b,{to:"/register",exact:!0,className:W.a.nav_link,activeClassName:W.a.nav_link_active,children:"Register"}),Object(G.jsx)(I.b,{to:"/login",className:W.a.nav_link,activeClassName:W.a.nav_link_active,children:"Login"})]})},ae=c(54);function se(){var e=Object(d.c)(Y);return Object(G.jsx)(ae.a,{sectionCN:W.a.sectionNav,children:Object(G.jsxs)("header",{className:W.a.header,children:[Object(G.jsx)(Q,{}),e?Object(G.jsx)(re,{}):Object(G.jsx)(ne,{})]})})}var oe=c(33),ue=c(48);function ie(e){e.isAuthenticated;var t=e.redirectTo,c=e.children,r=Object(ue.a)(e,["isAuthenticated","redirectTo","children"]),n=Object(d.c)(Y);return Object(G.jsx)(B.b,Object(oe.a)(Object(oe.a)({},r),{},{children:n?c:Object(G.jsx)(B.a,{to:t})}))}function be(e){e.isAuthenticated;var t=e.redirectTo,c=e.children,r=Object(ue.a)(e,["isAuthenticated","redirectTo","children"]),n=Object(d.c)(Y);return Object(G.jsx)(B.b,Object(oe.a)(Object(oe.a)({},r),{},{children:n&&r.restricted?Object(G.jsx)(B.a,{to:t}):c}))}var je=Object(i.lazy)((function(){return c.e(1).then(c.bind(null,189))})),le=Object(i.lazy)((function(){return c.e(4).then(c.bind(null,194))})),de=Object(i.lazy)((function(){return Promise.all([c.e(0),c.e(5)]).then(c.bind(null,190))})),Oe=Object(i.lazy)((function(){return Promise.all([c.e(0),c.e(2)]).then(c.bind(null,192))}));function fe(){var e=Object(d.b)();return Object(i.useEffect)((function(){e(P.a.getCurrentUser())}),[e]),Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(J.a,{}),Object(G.jsx)(se,{}),Object(G.jsx)(i.Suspense,{fallback:Object(G.jsx)(M.a,{type:"ThreeDots",color:"teal",height:130,width:130,style:{textAlign:"center"}}),children:Object(G.jsxs)(B.d,{children:[Object(G.jsx)(be,{path:"/",exact:!0,children:Object(G.jsx)(je,{})}),Object(G.jsx)(be,{path:"/register",restricted:!0,redirectTo:"/contacts",children:Object(G.jsx)(de,{})}),Object(G.jsx)(be,{path:"/login",restricted:!0,redirectTo:"/contacts",children:Object(G.jsx)(Oe,{})}),Object(G.jsx)(ie,{path:"/contacts",redirectTo:"/login",children:Object(G.jsx)(le,{})})]})})]})}l.a.render(Object(G.jsx)(b.a.StrictMode,{children:Object(G.jsx)(d.a,{store:T.store,children:Object(G.jsx)(z.a,{loading:null,persistor:T.persistor,children:Object(G.jsx)(I.a,{children:Object(G.jsx)(fe,{})})})})}),document.getElementById("root"))},17:function(e,t,c){"use strict";var r=c(4),n=Object(r.b)("contacts/fetchContactsRequest"),a=Object(r.b)("contacts/fetchContactsSuccess"),s=Object(r.b)("contacts/fetchContactsError"),o=Object(r.b)("contacts/addContactRequest"),u=Object(r.b)("contacts/addContactSuccess"),i=Object(r.b)("contacts/addContactError"),b=Object(r.b)("contacts/deleteContactRequest"),j=Object(r.b)("contacts/deleteContactSuccess"),l=Object(r.b)("contacts/deleteContactError"),d=Object(r.b)("contacts/changeFilter");t.a={fetchContactsRequest:n,fetchContactsSuccess:a,fetchContactsError:s,addContactRequest:o,addContactSuccess:u,addContactError:i,deleteContactRequest:b,deleteContactSuccess:j,deleteContactError:l,changeFilter:d}},19:function(e,t,c){e.exports={header:"AppNav_header__34y_i",sectionNav:"AppNav_sectionNav__3rRY-",nav_link:"AppNav_nav_link__sLewY",nav_link_active:"AppNav_nav_link_active__K9qBw"}},41:function(e,t,c){"use strict";var r=c(29),n=c.n(r),a=c(6);n.a.defaults.baseURL="https://connections-api.herokuapp.com";var s=function(e){n.a.defaults.headers.common.Authorization="Bearer ".concat(e)},o=function(){n.a.defaults.headers.common.Authorization=""};t.a={userRegister:function(e){return function(t){var c={name:e.name,email:e.email,password:e.password};t(a.a.registerRequest()),n.a.post("/users/signup",c).then((function(e){var c=e.data;s(c.token),t(a.a.registerSuccess(c))})).catch((function(e){return t(a.a.registerError(e.message))}))}},userLogin:function(e){return function(t){var c={email:e.email,password:e.password};t(a.a.loginRequest()),n.a.post("/users/login",c).then((function(e){var c=e.data;s(c.token),t(a.a.loginSuccess(c))})).catch((function(e){return t(a.a.registerError(e.message))}))}},userLogout:function(){return function(e){e(a.a.logoutRequest()),n.a.post("/users/logout").then((function(){o(),e(a.a.logoutSuccess())})).catch((function(t){return e(a.a.logoutError(t.message))}))}},getCurrentUser:function(){return function(e,t){var c=t().userData.token;c&&(s(c),e(a.a.currentUserRequest()),n.a.get("/users/current").then((function(t){var c=t.data;return e(a.a.currentUserSuccess(c))})).catch((function(t){return e(a.a.currentUserError(t.message))})))}}}},49:function(e,t,c){e.exports={userDiv:"UserMenu_userDiv__2b3BJ",userName:"UserMenu_userName__1NrI5",avatar:"UserMenu_avatar__o4hi4"}},54:function(e,t,c){"use strict";c(0);var r=c(140),n=c(2);t.a=function(e){var t=e.sectionCN,c=e.containerCN,a=e.children;return Object(n.jsx)("section",{className:t,children:Object(n.jsx)(r.a,{maxWidth:"lg",className:c,children:a})})}},6:function(e,t,c){"use strict";var r=c(4),n=Object(r.b)("contacts/loginRequest"),a=Object(r.b)("contacts/loginSuccess"),s=Object(r.b)("contacts/loginError"),o=Object(r.b)("contacts/registerRequest"),u=Object(r.b)("contacts/registerSuccess"),i=Object(r.b)("contacts/registerError"),b=Object(r.b)("contacts/logoutRequest"),j=Object(r.b)("contacts/logoutSuccess"),l=Object(r.b)("contacts/logoutError"),d=Object(r.b)("contacts/currentUserRequest"),O=Object(r.b)("contacts/currentUserSuccess"),f=Object(r.b)("contacts/currentUserError");t.a={loginRequest:n,loginSuccess:a,loginError:s,logoutError:l,logoutRequest:b,logoutSuccess:j,registerError:i,registerRequest:o,registerSuccess:u,currentUserError:f,currentUserRequest:d,currentUserSuccess:O}},97:function(e,t,c){}},[[138,6,7]]]);
//# sourceMappingURL=main.92159c64.chunk.js.map